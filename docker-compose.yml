version: "3.9"

services:
  vehicle-counter:
    build: .
    image: car-count:latest
    container_name: car_counter
    restart: unless-stopped
    ports:
      - "8000:8000"
    env_file:
      - .env
    volumes:
      - counts_data:/data
    # ── Network access to the camera ──────────────────────────────────────
    # Option A – host networking (simplest; camera reachable on host):
    # network_mode: host
    #
    # Option B – connect to a VPN/WireGuard Docker network:
    # networks:
    #   - vpn_net
    #
    # Option C – default bridge (camera reachable via port-forward/RTSP proxy)
    # No extra config needed; set CAMERA_RTSP_URL to the proxy address.

volumes:
  counts_data:

# Uncomment if using an external Docker VPN network (Option B above):
# networks:
#   vpn_net:
#     external: true
#     name: wg_net
